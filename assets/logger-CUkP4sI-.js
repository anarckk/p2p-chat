function I(){const e=new Date,o=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),n=String(e.getSeconds()).padStart(2,"0");return`${o}:${r}:${n}`}function S(e,o=200){if(!e)return"";const r=String(e);return r.length>o?r.substring(0,o)+"...":r}function f(e){if(!e||typeof e!="object")return S(String(e));const o=[];for(const[n,c]of Object.entries(e)){const t=typeof c=="object"?JSON.stringify(c):String(c);o.push(`${n}=${S(t,200)}`)}const r=o.join(" ");return S(r,200)}function N(e){return!e||e.length<=16?e:`${e.substring(0,8)}...${e.substring(e.length-8)}`}function s(e,o,r,n){const t=[`[${I()}][${e}]`,o,r];if(n){n.peerId&&t.push(`peer=${N(n.peerId)}`),n.from&&t.push(`from=${N(n.from)}`),n.to&&t.push(`to=${N(n.to)}`),n.username&&t.push(`user=${S(n.username,50)}`),n.messageId&&t.push(`msg=${S(n.messageId,20)}`),n.msgType&&t.push(`type=${n.msgType}`),n.version!==void 0&&t.push(`v=${n.version}`),n.userInfo&&t.push(`info=${S(n.userInfo,100)}`);const u=Object.keys(n).filter(E=>!["peerId","from","to","username","messageId","msgType","version","userInfo"].includes(E));for(const E of u)t.push(`${E}=${f(n[E])}`)}const i=S(t.join(" "));switch(o){case"SUCCESS":console.log(`%c${i}`,"color: #52c41a; font-weight: bold");break;case"WARNING":console.warn(`%c${i}`,"color: #faad14; font-weight: bold");break;case"ERROR":console.error(`%c${i}`,"color: #ff4d4f; font-weight: bold");break;default:console.log(i)}}const C={discovery:{found:e=>s("DISCOVERY","SUCCESS","发现用户",e),add:e=>s("DISCOVERY","INFO","添加设备",e),notify:e=>s("DISCOVERY","INFO","发送发现通知",e),notified:e=>s("DISCOVERY","INFO","收到发现通知",e),query:e=>s("DISCOVERY","INFO","查询用户名",e),response:e=>s("DISCOVERY","INFO","响应用户名",e)},message:{send:e=>s("MESSAGE","INFO","发送消息",e),sent:e=>s("MESSAGE","SUCCESS","消息已送达",e),received:e=>s("MESSAGE","SUCCESS","收到消息",e),delivered:e=>s("MESSAGE","SUCCESS","送达确认",e),retry:e=>s("MESSAGE","WARNING","重试消息",e),failed:e=>s("MESSAGE","ERROR","发送失败",e)},sync:{versionMismatch:e=>s("SYNC","INFO","版本号不一致",e),requestInfo:e=>s("SYNC","INFO","请求用户信息",e),updateInfo:e=>s("SYNC","SUCCESS","更新用户信息",e),respondInfo:e=>s("SYNC","INFO","响应用户信息",e)},heartbeat:{check:e=>s("HEARTBEAT","INFO","心跳检查",e),online:e=>s("HEARTBEAT","SUCCESS","设备在线",e),offline:e=>s("HEARTBEAT","WARNING","设备离线",e),response:e=>s("HEARTBEAT","INFO","响应心跳",e)},connection:{connecting:()=>s("CONN","INFO","正在连接"),connected:e=>s("CONN","SUCCESS","连接成功",e),disconnected:()=>s("CONN","WARNING","连接断开"),closed:()=>s("CONN","ERROR","连接关闭"),error:e=>s("CONN","ERROR","连接错误",e)},networkAcceleration:{enabled:e=>s("NA","SUCCESS","网络加速已开启",e),disabled:e=>s("NA","INFO","网络加速已关闭",e),relayRequest:e=>s("NA","INFO","中转请求",e),relayResponse:e=>s("NA","SUCCESS","中转响应",e),relayFailed:e=>s("NA","ERROR","中转失败",e),statusSync:e=>s("NA","INFO","状态同步",e)},deviceDiscovery:{requestSent:e=>s("DEVDISC","INFO","请求设备列表",e),requestReceived:e=>s("DEVDISC","INFO","收到设备列表请求",e),responseSent:e=>s("DEVDISC","INFO","响应设备列表",e),responseReceived:e=>s("DEVDISC","SUCCESS","收到设备列表响应",e),newDevice:e=>s("DEVDISC","SUCCESS","发现新设备",e)},universeBootstrap:{connecting:()=>s("UNIVERSE","INFO","连接宇宙启动者"),success:e=>s("UNIVERSE","SUCCESS","成为宇宙启动者",e),failed:e=>s("UNIVERSE","WARNING","连接失败，请求设备列表",e),requestList:e=>s("UNIVERSE","INFO","向启动者请求设备列表",e),responseList:e=>s("UNIVERSE","SUCCESS","收到设备列表",e),requestReceived:e=>s("UNIVERSE","INFO","收到设备列表请求",e)},info:(e,o)=>s("COMM","INFO",e,o),success:(e,o)=>s("COMM","SUCCESS",e,o),warning:(e,o)=>s("COMM","WARNING",e,o),error:(e,o)=>s("COMM","ERROR",e,o)};export{C as c};
