import{P as N}from"./PeerHttpUtil-CauAybgU.js";import{d as P,o as H,v as q,k as x,c as e,w as t,r as i,e as o,f,h as _,t as c,g as w,a as z,q as E}from"./index-Bhcth52k.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"container"},L={class:"messages-container"},$=P({__name:"TestView",setup(j){const u=i(""),d=i(""),v=i("连接中..."),g=i([]);let l=null;H(()=>{l=new N,l.on("open",n=>{v.value=n}),l.on("message",n=>{p(n.from,n.data)})}),q(()=>{l&&l.destroy()});function k(){const n=u.value.trim(),a=d.value.trim();n&&a&&l.send(n,`msg_${Date.now()}`,a,"text").then(()=>{p("我",a),d.value=""}).catch(r=>{p("系统","发送失败: "+r.message,!0)})}function p(n,a,r=!1){g.value.push({from:n,content:a,time:new Date().toLocaleTimeString(),isSystem:r})}return(n,a)=>{const r=o("a-typography-text"),I=o("a-descriptions-item"),h=o("a-descriptions"),y=o("a-divider"),D=o("a-input"),m=o("a-form-item"),C=o("a-textarea"),V=o("a-button"),B=o("a-form"),S=o("a-typography-title"),b=o("a-tag"),T=o("a-list-item"),U=o("a-list"),M=o("a-card");return f(),x("div",J,[e(M,{title:"PeerJS 测试",bordered:!1},{default:t(()=>[e(h,{bordered:"",column:1},{default:t(()=>[e(I,{label:"我的 ID"},{default:t(()=>[e(r,{copyable:""},{default:t(()=>[_(c(v.value),1)]),_:1})]),_:1})]),_:1}),e(y),e(B,{layout:"vertical"},{default:t(()=>[e(m,{label:"对方 ID"},{default:t(()=>[e(D,{value:u.value,"onUpdate:value":a[0]||(a[0]=s=>u.value=s),placeholder:"粘贴对方的 ID"},null,8,["value"])]),_:1}),e(m,{label:"消息内容"},{default:t(()=>[e(C,{value:d.value,"onUpdate:value":a[1]||(a[1]=s=>d.value=s),rows:3,placeholder:"输入要发送的消息"},null,8,["value"])]),_:1}),e(m,null,{default:t(()=>[e(V,{type:"primary",onClick:k},{default:t(()=>[...a[2]||(a[2]=[_("发送消息",-1)])]),_:1})]),_:1})]),_:1}),e(y),e(S,{level:5},{default:t(()=>[...a[3]||(a[3]=[_("消息记录",-1)])]),_:1}),w("div",L,[e(U,{"data-source":g.value,size:"small"},{renderItem:t(({item:s})=>[e(T,null,{default:t(()=>[e(r,{type:"secondary"},{default:t(()=>[_("["+c(s.time)+"]",1)]),_:2},1024),s.isSystem?(f(),z(b,{key:0,color:"warning"},{default:t(()=>[_(c(s.content),1)]),_:2},1024)):(f(),x(E,{key:1},[e(b,{color:"blue"},{default:t(()=>[_(c(s.from),1)]),_:2},1024),w("span",null,c(s.content),1)],64))]),_:2},1024)]),_:1},8,["data-source"])])]),_:1})])}}}),O=F($,[["__scopeId","data-v-da31627b"]]);export{O as default};
